(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{513:function(v,_,t){"use strict";t.r(_);var e=t(6),a=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h2",{attrs:{id:"å‚æ•°ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚æ•°ç±»å‹"}},[v._v("#")]),v._v(" å‚æ•°ç±»å‹")]),v._v(" "),t("ul",[t("li",[t("strong",[v._v("æ ‡å‡†å‚æ•°ï¼ˆ-ï¼‰")]),v._v("ï¼šJVM çš„å„ä¸ªç‰ˆæœ¬ä¸­åŸºæœ¬ä¸å˜çš„ï¼Œç›¸å¯¹æ¯”è¾ƒç¨³å®šçš„å‚æ•°ï¼Œå‘åå…¼å®¹; ğŸŒ° "),t("code",[v._v("-help")])]),v._v(" "),t("li",[t("strong",[v._v("éæ ‡å‡†å‚æ•°ï¼ˆ-ï¼‰")]),v._v("ï¼šå˜åŒ–æ¯”è¾ƒå°çš„å‚æ•°ï¼Œé»˜è®¤ JVM å®ç°è¿™äº›å‚æ•°çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¹¶ä¸ä¿è¯æ‰€æœ‰ JVM å®ç°éƒ½æ»¡è¶³ï¼Œä¸”ä¸ä¿è¯å‘åå…¼å®¹; ğŸŒ° å¦‚"),t("code",[v._v("-Xint")]),v._v("ï¼ˆè§£é‡Šæ‰§è¡Œï¼‰ã€"),t("code",[v._v("-Xcomp")]),v._v("ï¼ˆç¬¬ä¸€æ¬¡ä½¿ç”¨å°±ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼‰ã€"),t("code",[v._v("-Xmixed")]),v._v("ï¼ˆæ··åˆæ¨¡å¼ï¼ŒJVM å†³å®šæ˜¯å¦ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼‰")]),v._v(" "),t("li",[t("strong",[v._v("é stable å‚æ•°ï¼ˆ-ï¼‰")]),v._v("ï¼šæ­¤ç±»å‚æ•°å„ä¸ª JVM å®ç°ä¼šæœ‰æ‰€ä¸åŒï¼Œå°†æ¥å¯èƒ½ä¼šéšæ—¶å–æ¶ˆï¼Œéœ€è¦æ…é‡ä½¿ç”¨ï¼›")])]),v._v(" "),t("h3",{attrs:{id:"æ ‡å‡†å‚æ•°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ ‡å‡†å‚æ•°"}},[v._v("#")]),v._v(" æ ‡å‡†å‚æ•°")]),v._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[v._v("å‘½ä»¤è¡Œè¾“å…¥ "),t("code",[v._v("java")]),v._v("ï¼Œå³å¯æŸ¥çœ‹")])]),t("ul",[t("li",[t("code",[v._v("-version")]),v._v("ï¼šè¾“å‡º java çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚ jdk ç‰ˆæœ¬ã€vendorã€model")]),v._v(" "),t("li",[t("code",[v._v("-help")]),v._v("ï¼šè¾“å‡º java æ ‡å‡†å‚æ•°åˆ—è¡¨åŠå…¶æè¿°")]),v._v(" "),t("li",[t("code",[v._v("-showversion")]),v._v("ï¼šè¾“å‡º java ç‰ˆæœ¬ä¿¡æ¯ï¼ˆä¸-versionç›¸åŒï¼‰ä¹‹åï¼Œç»§ç»­è¾“å‡º java çš„æ ‡å‡†å‚æ•°åˆ—è¡¨åŠå…¶æè¿°ï¼Œç›¸å½“äº "),t("code",[v._v("java -verion")]),v._v(" å’Œ "),t("code",[v._v("java -help")])]),v._v(" "),t("li",[t("code",[v._v("-client")]),v._v("ï¼šè®¾ç½® jvm ä½¿ç”¨ client æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡ä¸é«˜ï¼Œé€šå¸¸ç”¨äºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæˆ–è€…PCåº”ç”¨å¼€å‘å’Œè°ƒè¯•")]),v._v(" "),t("li",[t("code",[v._v("-server")]),v._v("ï¼šè®¾ç½® jvm ä½¿ server æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡å¾ˆé«˜ï¼Œé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚åœ¨å…·æœ‰64ä½èƒ½åŠ›çš„ jdk ç¯å¢ƒä¸‹å°†é»˜è®¤å¯ç”¨è¯¥æ¨¡å¼ï¼Œè€Œå¿½ç•¥ "),t("code",[v._v("-client")]),v._v(" å‚æ•°")]),v._v(" "),t("li",[t("code",[v._v("-agentlib:libname[=options]")]),v._v("ï¼šç”¨äºè£…è½½æœ¬åœ° lib åŒ…ã€‚å…¶ä¸­ libname ä¸ºæœ¬åœ°ä»£ç†åº“æ–‡ä»¶åï¼Œé»˜è®¤æœç´¢è·¯å¾„ä¸ºç¯å¢ƒå˜é‡ PATH ä¸­çš„è·¯å¾„ï¼Œoptions ä¸ºä¼ ç»™æœ¬åœ°åº“å¯åŠ¨æ—¶çš„å‚æ•°ï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ç”¨é€—å·åˆ†éš”")]),v._v(" "),t("li",[t("code",[v._v("-agentpath:pathname[=options]")]),v._v("ï¼šæŒ‰å…¨è·¯å¾„è£…è½½æœ¬åœ°åº“ï¼Œä¸å†æœç´¢PATHä¸­çš„è·¯å¾„ï¼›å…¶ä»–åŠŸèƒ½å’Œ agentlibç›¸åŒ")]),v._v(" "),t("li",[t("code",[v._v("-Dproperty=value")]),v._v(" è®¾ç½®ç³»ç»Ÿå±æ€§å/å€¼å¯¹ï¼Œè¿è¡Œåœ¨æ­¤jvmä¹‹ä¸Šçš„åº”ç”¨ç¨‹åºå¯ç”¨ "),t("code",[v._v('System.getProperty("property")')]),v._v(" å¾—åˆ° value çš„å€¼ã€‚ å¦‚æœ value ä¸­æœ‰ç©ºæ ¼ï¼Œåˆ™éœ€è¦ç”¨åŒå¼•å·å°†è¯¥å€¼æ‹¬èµ·æ¥ï¼Œå¦‚ "),t("code",[v._v('-Dname="space string"')]),v._v("ã€‚ è¯¥å‚æ•°é€šå¸¸ç”¨äºè®¾ç½®ç³»ç»Ÿçº§å…¨å±€å˜é‡å€¼ï¼Œå¦‚é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œä»¥ä¾¿è¯¥å±æ€§åœ¨ç¨‹åºä¸­ä»»ä½•åœ°æ–¹éƒ½å¯è®¿é—®")]),v._v(" "),t("li",[t("code",[v._v("-verbose:[class|gc|jni]")]),v._v("ï¼šè¾“å‡ºæ¯ä¸ªåŠ è½½ç±»|gc|jni çš„ä¿¡æ¯")])]),v._v(" "),t("h3",{attrs:{id:"x-å‚æ•°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x-å‚æ•°"}},[v._v("#")]),v._v(" X å‚æ•°")]),v._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[v._v("éæ ‡å‡†å‚æ•°åˆç§°ä¸ºæ‰©å±•å‚æ•°ï¼Œå‘½ä»¤è¡Œè¾“å…¥ "),t("code",[v._v("java -X")]),v._v("ï¼Œå³å¯æŸ¥çœ‹")])]),t("ul",[t("li",[t("code",[v._v("-Xint")]),v._v("ï¼šè®¾ç½® jvm ä»¥è§£é‡Šæ¨¡å¼è¿è¡Œï¼Œæ‰€æœ‰çš„å­—èŠ‚ç å°†è¢«ç›´æ¥æ‰§è¡Œï¼Œè€Œä¸ä¼šç¼–è¯‘æˆæœ¬åœ°ç ")]),v._v(" "),t("li",[t("code",[v._v("-Xmixed")]),v._v("ï¼šæ··åˆæ¨¡å¼ï¼ŒJVMè‡ªå·±æ¥å†³å®šæ˜¯å¦ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼Œé»˜è®¤ä½¿ç”¨çš„å°±æ˜¯æ··åˆæ¨¡å¼")]),v._v(" "),t("li",[t("code",[v._v("-Xbatch")]),v._v("ï¼šå…³é—­åå°ä»£ç ç¼–è¯‘ï¼Œå¼ºåˆ¶åœ¨å‰å°ç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆä¹‹åæ‰èƒ½è¿›è¡Œä»£ç æ‰§è¡Œã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œjvm åœ¨åå°è¿›è¡Œç¼–è¯‘ï¼Œè‹¥æ²¡æœ‰ç¼–è¯‘å®Œæˆï¼Œåˆ™å‰å°è¿è¡Œä»£ç æ—¶ä»¥è§£é‡Šæ¨¡å¼è¿è¡Œ")]),v._v(" "),t("li",[t("code",[v._v("-Xbootclasspath:bootclasspath")]),v._v("ï¼šè®© jvm ä»æŒ‡å®šè·¯å¾„ï¼ˆå¯ä»¥æ˜¯åˆ†å·åˆ†éš”çš„ç›®å½•ã€jarã€æˆ–è€…zipï¼‰ä¸­åŠ è½½bootclassï¼Œç”¨æ¥æ›¿æ¢ jdk çš„ rt.jarï¼›è‹¥éå¿…è¦ï¼Œä¸€èˆ¬ä¸ä¼šç”¨åˆ°")]),v._v(" "),t("li",[t("code",[v._v("-Xbootclasspath/a:path")]),v._v(" ï¼šå°†æŒ‡å®šè·¯å¾„çš„æ‰€æœ‰æ–‡ä»¶è¿½åŠ åˆ°é»˜è®¤ bootstrap è·¯å¾„ä¸­")]),v._v(" "),t("li",[t("code",[v._v("-Xfuture")]),v._v("ï¼šè®©jvmå¯¹ç±»æ–‡ä»¶æ‰§è¡Œä¸¥æ ¼çš„æ ¼å¼æ£€æŸ¥ï¼ˆé»˜è®¤ jvm ä¸è¿›è¡Œä¸¥æ ¼æ ¼å¼æ£€æŸ¥ï¼‰ï¼Œä»¥ç¬¦åˆç±»æ–‡ä»¶æ ¼å¼è§„èŒƒï¼Œæ¨èå¼€å‘äººå‘˜ä½¿ç”¨è¯¥å‚æ•°ã€‚")]),v._v(" "),t("li",[t("code",[v._v("-Xincgc")]),v._v("ï¼šå¼€å¯å¢é‡ gcï¼ˆé»˜è®¤ä¸ºå…³é—­ï¼‰ï¼Œè¿™æœ‰åŠ©äºå‡å°‘é•¿æ—¶é—´GCæ—¶åº”ç”¨ç¨‹åºå‡ºç°çš„åœé¡¿ï¼Œä½†ç”±äºå¯èƒ½å’Œåº”ç”¨ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œæ‰€ä»¥ä¼šé™ä½CPUå¯¹åº”ç”¨çš„å¤„ç†èƒ½åŠ›")]),v._v(" "),t("li",[t("code",[v._v("-Xloggc:file")]),v._v("ï¼š ä¸-verbose:gcåŠŸèƒ½ç±»ä¼¼ï¼Œåªæ˜¯å°†æ¯æ¬¡GCäº‹ä»¶çš„ç›¸å…³æƒ…å†µè®°å½•åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶çš„ä½ç½®æœ€å¥½åœ¨æœ¬åœ°ï¼Œä»¥é¿å…ç½‘ç»œçš„æ½œåœ¨é—®é¢˜ã€‚è‹¥ä¸ verbose å‘½ä»¤åŒæ—¶å‡ºç°åœ¨å‘½ä»¤è¡Œä¸­ï¼Œåˆ™ä»¥ -Xloggc ä¸ºå‡†")]),v._v(" "),t("li",[t("code",[v._v("-Xms")]),v._v("ï¼šæŒ‡å®š jvm å †çš„åˆå§‹å¤§å°ï¼Œé»˜è®¤ä¸ºç‰©ç†å†…å­˜çš„1/64ï¼Œæœ€å°ä¸º1Mï¼Œå¯ä»¥æŒ‡å®šå•ä½ï¼Œæ¯”å¦‚kã€mï¼Œè‹¥ä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ºå­—èŠ‚")]),v._v(" "),t("li",[t("code",[v._v("-Xmx")]),v._v("ï¼šæŒ‡å®š jvm å †çš„æœ€å¤§å€¼ï¼Œé»˜è®¤ä¸ºç‰©ç†å†…å­˜çš„ 1/4æˆ–è€…1Gï¼Œæœ€å°ä¸º2Mï¼›å•ä½ä¸-Xmsä¸€è‡´")]),v._v(" "),t("li",[t("code",[v._v("-Xprof")]),v._v("ï¼šè·Ÿè¸ªæ­£è¿è¡Œçš„ç¨‹åºï¼Œå¹¶å°†è·Ÿè¸ªæ•°æ®åœ¨æ ‡å‡†è¾“å‡ºè¾“å‡ºï¼›é€‚åˆäºå¼€å‘ç¯å¢ƒè°ƒè¯•")]),v._v(" "),t("li",[t("code",[v._v("-Xss")]),v._v("ï¼š è®¾ç½®å•ä¸ªçº¿ç¨‹æ ˆçš„å¤§å°ï¼Œä¸€èˆ¬é»˜è®¤ä¸º 512k")])]),v._v(" "),t("h3",{attrs:{id:"xx-å‚æ•°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#xx-å‚æ•°"}},[v._v("#")]),v._v(" XX å‚æ•°")]),v._v(" "),t("p",[v._v("XX å‚æ•°ä¸»è¦åˆ†ä¸º Boolean ç±»å‹å’Œ KV ç±»å‹")]),v._v(" "),t("p",[t("strong",[v._v("Boolean ç±»å‹")])]),v._v(" "),t("p",[v._v("æ ¼å¼ï¼š"),t("code",[v._v("-XX:[+-]<name>")]),v._v("è¡¨ç¤ºå¯ç”¨æˆ–è€…ç¦ç”¨ name å±æ€§")]),v._v(" "),t("p",[v._v("æ¯”å¦‚ï¼š")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("-XX:+UseConcMarkSweepGC")]),v._v("ï¼š å¯ç”¨ CMS åƒåœ¾å¤„ç†å™¨")]),v._v(" "),t("li",[t("code",[v._v("-XX:+UseG1GC")]),v._v("ï¼šå¯ç”¨ G1 åƒåœ¾å¤„ç†å™¨")])]),v._v(" "),t("p",[t("strong",[v._v("KV ç±»å‹")])]),v._v(" "),t("p",[v._v("æ ¼å¼ï¼š"),t("code",[v._v("-XX:<name>=<value>")]),v._v("è¡¨ç¤º name å±æ€§çš„å€¼æ˜¯ value")]),v._v(" "),t("p",[v._v("æ¯”å¦‚ï¼š")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("-XX:MaxGCPauseMillis=500")]),v._v("ï¼šGC æœ€å¤§çš„åœé¡¿æ—¶é—´ä¸º 500ms")]),v._v(" "),t("li",[t("code",[v._v("-XX:GCTimeRatio=19")])])]),v._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"}),t("p",[t("code",[v._v("-Xmx")]),v._v(" "),t("code",[v._v("-Xms")]),v._v(" æ˜¯ä»€ä¹ˆå‚æ•°ï¼Ÿ")]),v._v(" "),t("p",[v._v("å®é™…ä¸Šä¸æ˜¯ X å‚æ•°ï¼Œ"),t("strong",[v._v("è€Œæ˜¯ XX å‚æ•°")])]),v._v(" "),t("p",[t("code",[v._v("-Xms")]),v._v(" ç­‰ä»·äº "),t("code",[v._v("-XX:InitialHeapSize")])]),v._v(" "),t("p",[t("code",[v._v("-Xmx")]),v._v(" ç­‰ä»·äº "),t("code",[v._v("-XX:MaxHeapSize")])])]),t("h2",{attrs:{id:"æŸ¥çœ‹-jvm-è¿è¡Œæ—¶å‚æ•°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æŸ¥çœ‹-jvm-è¿è¡Œæ—¶å‚æ•°"}},[v._v("#")]),v._v(" æŸ¥çœ‹ JVM è¿è¡Œæ—¶å‚æ•°")]),v._v(" "),t("h3",{attrs:{id:"é€šè¿‡-jinfo-æŸ¥çœ‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é€šè¿‡-jinfo-æŸ¥çœ‹"}},[v._v("#")]),v._v(" é€šè¿‡ jinfo æŸ¥çœ‹")]),v._v(" "),t("div",{staticClass:"language-cmd line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v("jps -l\njinfo -flag {é…ç½®é¡¹} {pid}\njinfo -flags {pid} // æ‰“å°æ‰€æœ‰å‚æ•°\n\n")])]),v._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[v._v("1")]),t("br"),t("span",{staticClass:"line-number"},[v._v("2")]),t("br"),t("span",{staticClass:"line-number"},[v._v("3")]),t("br"),t("span",{staticClass:"line-number"},[v._v("4")]),t("br")])]),t("h3",{attrs:{id:"printflags"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#printflags"}},[v._v("#")]),v._v(" printFlags")]),v._v(" "),t("p",[t("code",[v._v("-XX:+PrintFlagsInitial")]),v._v("ï¼šæŸ¥çœ‹åˆå§‹å€¼")]),v._v(" "),t("p",[t("code",[v._v("-XX:+PrintFlagsFinal")]),v._v("ï¼šæŸ¥çœ‹æœ€ç»ˆå€¼")]),v._v(" "),t("h2",{attrs:{id:"å¸¸ç”¨é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸ç”¨é…ç½®"}},[v._v("#")]),v._v(" å¸¸ç”¨é…ç½®")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("å‚æ•°åç§°")]),v._v(" "),t("th",[v._v("å«ä¹‰")]),v._v(" "),t("th",[v._v("é»˜è®¤å€¼")]),v._v(" "),t("th",[v._v("è¯´æ˜")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("-Xms")]),v._v(" "),t("td",[v._v("åˆå§‹å †å¤§å°")]),v._v(" "),t("td",[v._v("ç‰©ç†å†…å­˜çš„1/64(<1GB)")]),v._v(" "),t("td",[v._v("é»˜è®¤(MinHeapFreeRatioå‚æ•°å¯ä»¥è°ƒæ•´)ç©ºä½™å †å†…å­˜å°äº40%æ—¶ï¼ŒJVMå°±ä¼šå¢å¤§å †ç›´åˆ°-Xmxçš„æœ€å¤§é™åˆ¶")])]),v._v(" "),t("tr",[t("td",[v._v("-Xmx")]),v._v(" "),t("td",[v._v("æœ€å¤§å †å¤§å°")]),v._v(" "),t("td",[v._v("ç‰©ç†å†…å­˜çš„1/4(<1GB)")]),v._v(" "),t("td",[v._v("é»˜è®¤(MaxHeapFreeRatioå‚æ•°å¯ä»¥è°ƒæ•´)ç©ºä½™å †å†…å­˜å¤§äº70%æ—¶ï¼ŒJVMä¼šå‡å°‘å †ç›´åˆ° -Xmsçš„æœ€å°é™åˆ¶")])]),v._v(" "),t("tr",[t("td",[v._v("-Xmn")]),v._v(" "),t("td",[v._v("å¹´è½»ä»£å¤§å°(1.4or lator)")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("æ³¨æ„ï¼šæ­¤å¤„çš„å¤§å°æ˜¯ï¼ˆeden+ 2 survivor space).ä¸jmap -heapä¸­æ˜¾ç¤ºçš„New genæ˜¯ä¸åŒçš„ã€‚ æ•´ä¸ªå †å¤§å°=å¹´è½»ä»£å¤§å° + å¹´è€ä»£å¤§å° + æŒä¹…ä»£å¤§å°. å¢å¤§å¹´è½»ä»£å,å°†ä¼šå‡å°å¹´è€ä»£å¤§å°.æ­¤å€¼å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“è¾ƒå¤§,Sunå®˜æ–¹æ¨èé…ç½®ä¸ºæ•´ä¸ªå †çš„3/8")])]),v._v(" "),t("tr",[t("td",[v._v("-Xss")]),v._v(" "),t("td",[v._v("æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v('DK5.0ä»¥åæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º1M,ä»¥å‰æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º256K.æ›´å…·åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§å°è¿›è¡Œ è°ƒæ•´.åœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹,å‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹.ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„,ä¸èƒ½æ— é™ç”Ÿæˆ,ç»éªŒå€¼åœ¨3000~5000å·¦å³ ä¸€èˆ¬å°çš„åº”ç”¨ï¼Œ å¦‚æœæ ˆä¸æ˜¯å¾ˆæ·±ï¼Œ åº”è¯¥æ˜¯128kå¤Ÿç”¨çš„ å¤§çš„åº”ç”¨å»ºè®®ä½¿ç”¨256kã€‚è¿™ä¸ªé€‰é¡¹å¯¹æ€§èƒ½å½±å“æ¯”è¾ƒå¤§ï¼Œéœ€è¦ä¸¥æ ¼çš„æµ‹è¯•ã€‚ï¼ˆæ ¡é•¿ï¼‰ å’Œthreadstacksizeé€‰é¡¹è§£é‡Šå¾ˆç±»ä¼¼,å®˜æ–¹æ–‡æ¡£ä¼¼ä¹æ²¡æœ‰è§£é‡Š,åœ¨è®ºå›ä¸­æœ‰è¿™æ ·ä¸€å¥è¯:"â€ -Xss is translated in a VM flag named ThreadStackSizeâ€ ä¸€èˆ¬è®¾ç½®è¿™ä¸ªå€¼å°±å¯ä»¥äº†')])]),v._v(" "),t("tr",[t("td",[v._v("-XX:ThreadStackSize")]),v._v(" "),t("td",[v._v("çº¿ç¨‹æ ˆå¤§å°")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:MetaspaceSize")]),v._v(" "),t("td",[v._v("è®¾ç½®å…ƒç©ºé—´å¤§å°")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è®¾ç½®å…ƒç©ºé—´å¤§å°ã€‚å…ƒç©ºé—´çš„æœ¬è´¨å’Œæ°¸ä¹…ä»£ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯¹ JMM è§„èŒƒä¸­æ–¹æ³•åŒºçš„å®ç°ã€‚ä¸è¿‡å…ƒç©ºé—´ä¸æ°¸ä¹…ä»£æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œå…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚å› æ­¤ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶ï¼Œä½†æ˜¯å…ƒç©ºé—´é»˜è®¤ä¹Ÿå¾ˆå°ï¼Œé¢‘ç¹ new å¯¹è±¡ï¼Œä¹Ÿä¼š OOM")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:NewSize")]),v._v(" "),t("td",[v._v("è®¾ç½®å¹´è½»ä»£å¤§å°(for 1.3/1.4)")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:MaxNewSize")]),v._v(" "),t("td",[v._v("å¹´è½»ä»£æœ€å¤§å€¼(for 1.3/1.4)")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:PermSize")]),v._v(" "),t("td",[v._v("è®¾ç½®æŒä¹…ä»£(perm gen)åˆå§‹å€¼")]),v._v(" "),t("td",[v._v("ç‰©ç†å†…å­˜çš„1/64")]),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:MaxPermSize")]),v._v(" "),t("td",[v._v("è®¾ç½®æŒä¹…ä»£æœ€å¤§å€¼")]),v._v(" "),t("td",[v._v("ç‰©ç†å†…å­˜çš„1/4")]),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:NewRatio")]),v._v(" "),t("td",[v._v("å¹´è½»ä»£(åŒ…æ‹¬Edenå’Œä¸¤ä¸ªSurvivoråŒº)ä¸å¹´è€ä»£çš„æ¯”å€¼(é™¤å»æŒä¹…ä»£)")]),v._v(" "),t("td",[v._v("2")]),v._v(" "),t("td",[v._v("-XX:NewRatio=4è¡¨ç¤ºå¹´è½»ä»£ä¸å¹´è€ä»£æ‰€å æ¯”å€¼ä¸º1:4,å¹´è½»ä»£å æ•´ä¸ªå †æ ˆçš„1/5 Xms=Xmxå¹¶ä¸”è®¾ç½®äº†Xmnçš„æƒ…å†µä¸‹ï¼Œè¯¥å‚æ•°ä¸éœ€è¦è¿›è¡Œè®¾ç½®")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:SurvivorRatio")]),v._v(" "),t("td",[v._v("EdenåŒºä¸SurvivoråŒºçš„å¤§å°æ¯”å€¼")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è®¾ç½®ä¸º8,åˆ™ä¸¤ä¸ªSurvivoråŒºä¸ä¸€ä¸ªEdenåŒºçš„æ¯”å€¼ä¸º2:8,ä¸€ä¸ªSurvivoråŒºå æ•´ä¸ªå¹´è½»ä»£çš„1/10")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+UseFastAccessorMethods")]),v._v(" "),t("td",[v._v("åŸå§‹ç±»å‹çš„å¿«é€Ÿä¼˜åŒ–")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:+DisableExplicitGC")]),v._v(" "),t("td",[v._v("å…³é—­System.gc()")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è¿™ä¸ªå‚æ•°éœ€è¦ä¸¥æ ¼çš„æµ‹è¯•")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:MaxTenuringThreshold")]),v._v(" "),t("td",[v._v("åƒåœ¾æœ€å¤§å¹´é¾„")]),v._v(" "),t("td",[v._v("15")]),v._v(" "),t("td",[v._v("å¦‚æœè®¾ç½®ä¸º 0 çš„è¯,åˆ™å¹´è½»ä»£å¯¹è±¡ä¸ç»è¿‡ Survivor åŒº,ç›´æ¥è¿›å…¥å¹´è€ä»£. å¯¹äºå¹´è€ä»£æ¯”è¾ƒå¤šçš„åº”ç”¨,å¯ä»¥æé«˜æ•ˆç‡.å¦‚æœå°†æ­¤å€¼è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒå¤§å€¼ï¼Œåˆ™å¹´è½»ä»£å¯¹è±¡ä¼šåœ¨ Survivor åŒºè¿›è¡Œå¤šæ¬¡å¤åˆ¶,è¿™æ ·å¯ä»¥å¢åŠ å¯¹è±¡åœ¨å¹´è½»ä»£çš„å­˜æ´»æ—¶é—´ï¼Œå¢åŠ åœ¨å¹´è½»ä»£å³è¢«å›æ”¶çš„æ¦‚ç‡ï¼Œ"),t("strong",[v._v("è¯¥å‚æ•°åªæœ‰åœ¨ä¸²è¡ŒGCæ—¶æ‰æœ‰æ•ˆ")])])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+AggressiveOpts")]),v._v(" "),t("td",[v._v("åŠ å¿«ç¼–è¯‘")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:+UseBiasedLocking")]),v._v(" "),t("td",[v._v("é”æœºåˆ¶çš„æ€§èƒ½æ”¹å–„")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-Xnoclassgc")]),v._v(" "),t("td",[v._v("ç¦ç”¨åƒåœ¾å›æ”¶")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:SoftRefLRUPolicyMSPerMB")]),v._v(" "),t("td",[v._v("æ¯å…†å †ç©ºé—²ç©ºé—´ä¸­SoftReferenceçš„å­˜æ´»æ—¶é—´")]),v._v(" "),t("td",[v._v("1s")]),v._v(" "),t("td",[v._v("softly reachable objects will remain alive for some amount of time after the last time they were referenced. The default value is one second of lifetime per free megabyte in the heap")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:PretenureSizeThreshold")]),v._v(" "),t("td",[v._v("å¯¹è±¡è¶…è¿‡å¤šå¤§æ˜¯ç›´æ¥åœ¨æ—§ç”Ÿä»£åˆ†é…")]),v._v(" "),t("td",[v._v("0")]),v._v(" "),t("td",[v._v("æ–°ç”Ÿä»£é‡‡ç”¨ Parallel Scavenge GC æ—¶æ— æ•ˆ å¦ä¸€ç§ç›´æ¥åœ¨æ—§ç”Ÿä»£åˆ†é…çš„æƒ…å†µæ˜¯å¤§çš„æ•°ç»„å¯¹è±¡,ä¸”æ•°ç»„ä¸­æ— å¤–éƒ¨å¼•ç”¨å¯¹è±¡")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:TLABWasteTargetPercent")]),v._v(" "),t("td",[v._v("TLABå edenåŒºçš„ç™¾åˆ†æ¯”")]),v._v(" "),t("td",[v._v("1%")]),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:+CollectGen0First")]),v._v(" "),t("td",[v._v("FullGCæ—¶æ˜¯å¦å…ˆYGC")]),v._v(" "),t("td",[v._v("false")]),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:TargetSurvivorRatio")]),v._v(" "),t("td",[v._v("survivor ç©ºé—´è¶…è¿‡æ—¶è¿›å…¥è€å¹´ä»£")]),v._v(" "),t("td",[v._v("50%")]),v._v(" "),t("td",[v._v("å½“ç»å†Minor GCåï¼Œsurvivorç©ºé—´å æœ‰é‡(ç™¾åˆ†æ¯”)è¶…è¿‡å®ƒçš„æ—¶å€™ï¼Œå°±ä¼šå‹ç¼©è¿›å…¥è€å¹´ä»£(å½“ç„¶ï¼Œå¦‚æœsurvivorç©ºé—´ä¸å¤Ÿï¼Œåˆ™ç›´æ¥è¿›å…¥è€å¹´ä»£)ã€‚é»˜è®¤å€¼ä¸º50%")])])])]),v._v(" "),t("h2",{attrs:{id:"å¹¶è¡Œæ”¶é›†å™¨ç›¸å…³å‚æ•°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶è¡Œæ”¶é›†å™¨ç›¸å…³å‚æ•°"}},[v._v("#")]),v._v(" å¹¶è¡Œæ”¶é›†å™¨ç›¸å…³å‚æ•°")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("å‚æ•°åç§°")]),v._v(" "),t("th",[v._v("å«ä¹‰")]),v._v(" "),t("th",[v._v("é»˜è®¤å€¼")]),v._v(" "),t("th",[v._v("è¯´æ˜")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("-XX:+UseParallelGC")]),v._v(" "),t("td",[v._v("Full GCé‡‡ç”¨parallel MSC (æ­¤é¡¹å¾…éªŒè¯)")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("é€‰æ‹©åƒåœ¾æ”¶é›†å™¨ä¸ºå¹¶è¡Œæ”¶é›†å™¨.æ­¤é…ç½®ä»…å¯¹å¹´è½»ä»£æœ‰æ•ˆ.å³ä¸Šè¿°é…ç½®ä¸‹,å¹´è½»ä»£ä½¿ç”¨å¹¶å‘æ”¶é›†,è€Œå¹´è€ä»£ä»æ—§ä½¿ç”¨ä¸²è¡Œæ”¶é›†.(æ­¤é¡¹å¾…éªŒè¯)")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+UseParNewGC")]),v._v(" "),t("td",[v._v("è®¾ç½®å¹´è½»ä»£ä¸ºå¹¶è¡Œæ”¶é›†")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("å¯ä¸CMSæ”¶é›†åŒæ—¶ä½¿ç”¨ï¼Œ"),t("strong",[v._v("JDK5.0ä»¥ä¸Šï¼ŒJVMä¼šæ ¹æ®ç³»ç»Ÿé…ç½®è‡ªè¡Œè®¾ç½®,æ‰€ä»¥æ— éœ€å†è®¾ç½®æ­¤å€¼")])])]),v._v(" "),t("tr",[t("td",[v._v("-XX:ParallelGCThreads")]),v._v(" "),t("td",[v._v("å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("æ­¤å€¼æœ€å¥½é…ç½®ä¸å¤„ç†å™¨æ•°ç›®ç›¸ç­‰ åŒæ ·é€‚ç”¨äºCMS")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+UseParallelOldGC")]),v._v(" "),t("td",[v._v("å¹´è€ä»£åƒåœ¾æ”¶é›†æ–¹å¼ä¸ºå¹¶è¡Œæ”¶é›†(Parallel Compacting)")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è¿™ä¸ªæ˜¯JAVA 6å‡ºç°çš„å‚æ•°é€‰é¡¹")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:MaxGCPauseMillis")]),v._v(" "),t("td",[v._v("æ¯æ¬¡å¹´è½»ä»£åƒåœ¾å›æ”¶çš„æœ€é•¿æ—¶é—´(æœ€å¤§æš‚åœæ—¶é—´)")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("å¦‚æœæ— æ³•æ»¡è¶³æ­¤æ—¶é—´ï¼ŒJVMä¼šè‡ªåŠ¨è°ƒæ•´å¹´è½»ä»£å¤§å°ï¼Œä»¥æ»¡è¶³æ­¤å€¼")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+UseAdaptiveSizePolicy")]),v._v(" "),t("td",[v._v("è‡ªåŠ¨é€‰æ‹©å¹´è½»ä»£åŒºå¤§å°å’Œç›¸åº”çš„SurvivoråŒºæ¯”ä¾‹")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è®¾ç½®æ­¤é€‰é¡¹åï¼Œå¹¶è¡Œæ”¶é›†å™¨ä¼šè‡ªåŠ¨é€‰æ‹©å¹´è½»ä»£åŒºå¤§å°å’Œç›¸åº”çš„SurvivoråŒºæ¯”ä¾‹ï¼Œä»¥è¾¾åˆ°ç›®æ ‡ç³»ç»Ÿè§„å®šçš„æœ€ä½ç›¸åº”æ—¶é—´æˆ–è€…æ”¶é›†é¢‘ç‡ç­‰ï¼Œ"),t("strong",[v._v("æ­¤å€¼å»ºè®®ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨æ—¶ï¼Œä¸€ç›´æ‰“å¼€")])])]),v._v(" "),t("tr",[t("td",[v._v("-XX:GCTimeRatio")]),v._v(" "),t("td",[v._v("è®¾ç½®åƒåœ¾å›æ”¶æ—¶é—´å ç¨‹åºè¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("å…¬å¼ä¸º"),t("code",[v._v("1/(1+n)")])])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+ScavengeBeforeFullGC")]),v._v(" "),t("td",[v._v("Full GCå‰è°ƒç”¨YGC")]),v._v(" "),t("td",[v._v("true")]),v._v(" "),t("td")])])]),v._v(" "),t("h2",{attrs:{id:"cms-ç›¸å…³å‚æ•°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cms-ç›¸å…³å‚æ•°"}},[v._v("#")]),v._v(" CMS ç›¸å…³å‚æ•°")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("å‚æ•°åç§°")]),v._v(" "),t("th",[v._v("å«ä¹‰")]),v._v(" "),t("th",[v._v("é»˜è®¤å€¼")]),v._v(" "),t("th",[v._v("è¯´æ˜")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("-XX:+UseConcMarkSweepGC")]),v._v(" "),t("td",[v._v("ä½¿ç”¨CMSå†…å­˜æ”¶é›†")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("æµ‹è¯•ä¸­é…ç½®è¿™ä¸ªä»¥å,-XX:NewRatio=4çš„é…ç½®å¤±æ•ˆäº†,åŸå› ä¸æ˜ã€‚æ‰€ä»¥ï¼Œæ­¤æ—¶å¹´è½»ä»£å¤§å°æœ€å¥½ç”¨-Xmnè®¾ç½®")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:CMSFullGCsBeforeCompaction")]),v._v(" "),t("td",[v._v("å¤šå°‘æ¬¡åè¿›è¡Œå†…å­˜å‹ç¼©")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v('ç”±äºå¹¶å‘æ”¶é›†å™¨ä¸å¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©ã€æ•´ç†,æ‰€ä»¥è¿è¡Œä¸€æ®µæ—¶é—´ä»¥åä¼šäº§ç”Ÿ"ç¢ç‰‡"ï¼Œä½¿å¾—è¿è¡Œæ•ˆç‡é™ä½ã€‚æ­¤å€¼è®¾ç½®è¿è¡Œå¤šå°‘æ¬¡ GC ä»¥åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©ã€æ•´ç†')])]),v._v(" "),t("tr",[t("td",[v._v("-XX+UseCMSCompactAtFullCollection")]),v._v(" "),t("td",[v._v("åœ¨FULL GCçš„æ—¶å€™ï¼Œ å¯¹å¹´è€ä»£çš„å‹ç¼©")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("CMS æ˜¯ä¸ç§»åŠ¨å†…å­˜å®¹æ˜“äº§ç”Ÿç¢ç‰‡ï¼Œå¯¼è‡´å†…å­˜ä¸å¤Ÿç”¨ï¼Œå› æ­¤ï¼Œå†…å­˜çš„å‹ç¼©è¿™ä¸ªæ—¶å€™å°±ä¼šè¢«å¯ç”¨ã€‚å¢åŠ è¿™ä¸ªå‚æ•°æ˜¯ä¸ªå¥½ä¹ æƒ¯ã€‚å¯èƒ½ä¼šå½±å“æ€§èƒ½,ä½†æ˜¯å¯ä»¥æ¶ˆé™¤ç¢ç‰‡")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+UseCMSInitiatingOccupancyOnly")]),v._v(" "),t("td",[v._v("ä½¿ç”¨æ‰‹åŠ¨å®šä¹‰åˆå§‹åŒ–å®šä¹‰å¼€å§‹CMSæ”¶é›†")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("ç¦æ­¢hostspotè‡ªè¡Œè§¦å‘CMS GC")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:CMSInitiatingOccupancyFraction=70")]),v._v(" "),t("td",[v._v("ä½¿ç”¨cmsä½œä¸ºåƒåœ¾å›æ”¶ ä½¿ç”¨70ï¼…åå¼€å§‹CMSæ”¶é›†")]),v._v(" "),t("td",[v._v("92")]),v._v(" "),t("td",[v._v("ä¸ºäº†ä¿è¯ä¸å‡ºç°promotion failed(è§ä¸‹é¢ä»‹ç»)é”™è¯¯,è¯¥å€¼çš„è®¾ç½®éœ€è¦æ»¡è¶³ä»¥ä¸‹å…¬å¼ "),t("a",{attrs:{href:"https://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html#CMSInitiatingOccupancyFraction_value",target:"_blank",rel:"noopener noreferrer"}},[v._v("CMSInitiatingOccupancyFractionè®¡ç®—å…¬å¼"),t("OutboundLink")],1)])]),v._v(" "),t("tr",[t("td",[v._v("-XX:CMSInitiatingPermOccupancyFraction")]),v._v(" "),t("td",[v._v("è®¾ç½®Perm Genä½¿ç”¨åˆ°è¾¾å¤šå°‘æ¯”ç‡æ—¶è§¦å‘")]),v._v(" "),t("td",[v._v("92")]),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:+AggressiveHeap")]),v._v(" "),t("td"),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è¯•å›¾æ˜¯ä½¿ç”¨å¤§é‡çš„ç‰©ç†å†…å­˜ é•¿æ—¶é—´å¤§å†…å­˜ä½¿ç”¨çš„ä¼˜åŒ–ï¼Œèƒ½æ£€æŸ¥è®¡ç®—èµ„æºï¼ˆå†…å­˜ï¼Œ å¤„ç†å™¨æ•°é‡ï¼‰ è‡³å°‘éœ€è¦256MBå†…å­˜ å¤§é‡çš„CPUï¼å†…å­˜ï¼Œ ï¼ˆåœ¨1.4.1åœ¨4CPUçš„æœºå™¨ä¸Šå·²ç»æ˜¾ç¤ºæœ‰æå‡ï¼‰")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+CMSParallelRemarkEnabled")]),v._v(" "),t("td",[v._v("é™ä½æ ‡è®°åœé¡¿")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:+CMSIncrementalMode")]),v._v(" "),t("td",[v._v("è®¾ç½®ä¸ºå¢é‡æ¨¡å¼")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("ç”¨äºå•CPUæƒ…å†µ")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+CMSClassUnloadingEnabled")]),v._v(" "),t("td",[v._v("å¼€å¯å¯¹æ°¸ä¹…ä»£å›æ”¶")]),v._v(" "),t("td",[v._v("false")]),v._v(" "),t("td",[v._v("CMSæ˜¯é»˜è®¤ä¸ä¼šå¯¹æ°¸ä¹…ä»£è¿›è¡Œåƒåœ¾å›æ”¶çš„ï¼Œè®¾ç½®æ­¤å‚æ•°åˆ™æ˜¯å¼€å¯")])])])]),v._v(" "),t("h2",{attrs:{id:"è¾…åŠ©ä¿¡æ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¾…åŠ©ä¿¡æ¯"}},[v._v("#")]),v._v(" è¾…åŠ©ä¿¡æ¯")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("å‚æ•°åç§°")]),v._v(" "),t("th",[v._v("å«ä¹‰")]),v._v(" "),t("th",[v._v("é»˜è®¤å€¼")]),v._v(" "),t("th",[v._v("è¯´æ˜")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("-XX:+PrintGC")]),v._v(" "),t("td"),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è¾“å‡ºå½¢å¼ï¼š[GC 118250K->113543K(130112K), 0.0094143 secs] [Full GC 121376K->10414K(130112K), 0.0650971 secs]")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+PrintGCDetails")]),v._v(" "),t("td"),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è¾“å‡ºå½¢å¼ï¼š[GC [DefNew: 8614K->781K(9088K), 0.0123035 secs] 118250K->113543K(130112K), 0.0124633 secs] [GC [DefNew: 8614K->8614K(9088K), 0.0000665 secs][Tenured: 112761K->10414K(121024K), 0.0433488 secs] 121376K->10414K(130112K), 0.0436268 secs]")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+PrintGCTimeStamps")]),v._v(" "),t("td"),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:+PrintGC:PrintGCTimeStamps")]),v._v(" "),t("td"),v._v(" "),t("td"),v._v(" "),t("td",[v._v("å¯ä¸-XX:+PrintGC -XX:+PrintGCDetailsæ··åˆä½¿ç”¨ è¾“å‡ºå½¢å¼:11.851: [GC 98328K->93620K(130112K), 0.0082960 secs]")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+PrintGCApplicationStoppedTime")]),v._v(" "),t("td",[v._v("æ‰“å°åƒåœ¾å›æ”¶æœŸé—´ç¨‹åºæš‚åœçš„æ—¶é—´.å¯ä¸ä¸Šé¢æ··åˆä½¿ç”¨")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è¾“å‡ºå½¢å¼ï¼šTotal time for which application threads were stopped: 0.0468229 seconds")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+PrintGCApplicationConcurrentTime")]),v._v(" "),t("td",[v._v("æ‰“å°æ¯æ¬¡åƒåœ¾å›æ”¶å‰,ç¨‹åºæœªä¸­æ–­çš„æ‰§è¡Œæ—¶é—´.å¯ä¸ä¸Šé¢æ··åˆä½¿ç”¨")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("è¾“å‡ºå½¢å¼:Application time: 0.5291524 seconds")])]),v._v(" "),t("tr",[t("td",[v._v("-XX:+PrintHeapAtGC")]),v._v(" "),t("td",[v._v("æ‰“å°GCå‰åçš„è¯¦ç»†å †æ ˆä¿¡æ¯")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-Xloggc:filename")]),v._v(" "),t("td",[v._v("æŠŠç›¸å…³æ—¥å¿—ä¿¡æ¯è®°å½•åˆ°æ–‡ä»¶ä»¥ä¾¿åˆ†æ. ä¸ä¸Šé¢å‡ ä¸ªé…åˆä½¿ç”¨")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:+PrintClassHistogram")]),v._v(" "),t("td"),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("-XX:+PrintTLAB")]),v._v(" "),t("td",[v._v("æŸ¥çœ‹TLABç©ºé—´çš„ä½¿ç”¨æƒ…å†µ")]),v._v(" "),t("td"),v._v(" "),t("td")]),v._v(" "),t("tr",[t("td",[v._v("XX:+PrintTenuringDistribution")]),v._v(" "),t("td",[v._v("æŸ¥çœ‹æ¯æ¬¡minor GCåæ–°çš„å­˜æ´»å‘¨æœŸçš„é˜ˆå€¼")]),v._v(" "),t("td"),v._v(" "),t("td",[v._v("Desired survivor size 1048576 bytes, new threshold 7 (max 15) new threshold 7å³æ ‡è¯†æ–°çš„å­˜æ´»å‘¨æœŸçš„é˜ˆå€¼ä¸º7")])])])]),v._v(" "),t("h2",{attrs:{id:"æ¨èé…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ¨èé…ç½®"}},[v._v("#")]),v._v(" æ¨èé…ç½®")]),v._v(" "),t("p",[v._v("1ã€é¦–å…ˆ Oracle å®˜æ–¹æ¨èå †çš„"),t("strong",[v._v("åˆå§‹åŒ–å¤§å°ä¸å †å¯è®¾ç½®çš„æœ€å¤§å€¼ä¸€èˆ¬æ˜¯ç›¸ç­‰çš„")]),v._v("ï¼Œå³ Xms = Xmxï¼Œå› ä¸ºèµ·å§‹å †å†…å­˜å¤ªå°ï¼ˆXmsï¼‰ï¼Œä¼šå¯¼è‡´å¯åŠ¨åˆæœŸé¢‘ç¹ GCï¼Œèµ·å§‹å †å†…å­˜è¾ƒå¤§ï¼ˆXmxï¼‰æœ‰åŠ©äºå‡å°‘ GC æ¬¡æ•°\n2ã€è°ƒè¯•çš„æ—¶å€™è®¾ç½®ä¸€äº›æ‰“å°å‚æ•°ï¼Œå¦‚ "),t("code",[v._v("-XX:+PrintClassHistogram")]),v._v(" "),t("code",[v._v("-XX:+PrintGCDetails")]),v._v(" "),t("code",[v._v("-XX:+PrintGCTimeStamps")]),v._v(" "),t("code",[v._v("-XX:+PrintHeapAtGC -Xloggc:log/gc.log")]),v._v("ï¼Œè¿™æ ·å¯ä»¥ä» gc.log é‡Œçœ‹å‡ºä¸€äº›ç«¯å€ªå‡ºæ¥\n3ã€ç³»ç»Ÿåœé¡¿æ—¶é—´è¿‡é•¿å¯èƒ½æ˜¯ GC çš„é—®é¢˜ä¹Ÿå¯èƒ½æ˜¯ç¨‹åºçš„é—®é¢˜ï¼Œå¤šç”¨ jmap å’Œ jstack æŸ¥çœ‹ï¼Œæˆ–è€… "),t("code",[v._v("killall -3 Java")]),v._v("ï¼Œç„¶åæŸ¥çœ‹ Java æ§åˆ¶å°æ—¥å¿—ï¼Œèƒ½çœ‹å‡ºå¾ˆå¤šé—®é¢˜\n4ã€é‡‡ç”¨å¹¶å‘å›æ”¶æ—¶ï¼Œå¹´è½»ä»£å°ä¸€ç‚¹ï¼Œå¹´è€ä»£è¦å¤§ï¼Œå› ä¸ºå¹´è€ä»£ç”¨çš„æ˜¯å¹¶å‘å›æ”¶ï¼Œå³ä½¿æ—¶é—´é•¿ç‚¹ä¹Ÿä¸ä¼šå½±å“å…¶ä»–ç¨‹åºç»§ç»­è¿è¡Œï¼Œç½‘ç«™ä¸ä¼šåœé¡¿\n5ã€ä»”ç»†äº†è§£è‡ªå·±çš„åº”ç”¨ï¼Œå¦‚æœç”¨äº†ç¼“å­˜ï¼Œé‚£ä¹ˆå¹´è€ä»£åº”è¯¥å¤§ä¸€äº›ï¼Œç¼“å­˜çš„ HashMap ä¸åº”è¯¥æ— é™åˆ¶é•¿ï¼Œå»ºè®®é‡‡ç”¨ LRU ç®—æ³•çš„ Map åšç¼“å­˜ï¼ŒLRUMap çš„æœ€å¤§é•¿åº¦ä¹Ÿè¦æ ¹æ®å®é™…æƒ…å†µè®¾å®š")]),v._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"title"}),t("p",[v._v("ä¸€èˆ¬ç»å¸¸ç”¨åˆ°å“ªäº›å‚æ•°å‘¢ï¼Ÿ\n"),t("code",[v._v("-Xms")]),v._v("ã€"),t("code",[v._v("-Xmx")]),v._v("ã€"),t("code",[v._v("-Xss")]),v._v("ã€"),t("code",[v._v("-XX:MetaspaceSize")]),v._v("ã€"),t("code",[v._v("-XX:+PrintGCDetails")]),v._v("ã€"),t("code",[v._v("-XX:SurvivorRatio")]),v._v("ã€"),t("code",[v._v("-XX:NewRatio")]),v._v("ã€"),t("code",[v._v("-XX:MaxTenuringThreshold")])])]),t("h2",{attrs:{id:"gc-è€ƒè™‘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gc-è€ƒè™‘"}},[v._v("#")]),v._v(" GC è€ƒè™‘")]),v._v(" "),t("p",[t("strong",[v._v("åƒåœ¾å›æ”¶ç®—æ³• :")]),v._v(" "),t("strong",[v._v("å¼•ç”¨è®¡æ•°æ³•")]),v._v(": ä¼šæœ‰å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå¤è€çš„æ–¹æ³•ï¼›\n"),t("strong",[v._v("Mark-Sweep")]),v._v(": æ ‡è®°æ¸…é™¤ã€‚æ ¹å¯è¾¾åˆ¤æ–­ï¼Œæœ€å¤§çš„é—®é¢˜æ˜¯ç©ºé—´ç¢ç‰‡(æ¸…é™¤åƒåœ¾ä¹‹åå‰©ä¸‹ä¸è¿ç»­çš„å†…å­˜ç©ºé—´)ï¼›\n"),t("strong",[v._v("Copying")]),v._v(": å¤åˆ¶ç®—æ³•ã€‚å¯¹äºçŸ­å‘½å¯¹è±¡æ¥è¯´æœ‰ç”¨ï¼Œå¦åˆ™éœ€è¦å¤åˆ¶å¤§é‡çš„å¯¹è±¡ï¼Œæ•ˆç‡ä½ã€‚å¦‚Javaçš„æ–°ç”Ÿä»£å †ç©ºé—´ä¸­å°±æ˜¯ä½¿ç”¨äº†å®ƒ(survivorç©ºé—´çš„fromå’ŒtoåŒº)ï¼› "),t("strong",[v._v("Mark-Compact")]),v._v(": æ ‡è®°æ•´ç†ã€‚å¯¹äºè€å¹´å¯¹è±¡æ¥è¯´æœ‰ç”¨ï¼Œæ— éœ€å¤åˆ¶ï¼Œä¸ä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡")])])}),[],!1,null,null,null);_.default=a.exports}}]);